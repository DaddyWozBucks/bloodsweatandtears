angular.module("bst",["bst.controllers","bst.services","bst.directives","bst.filters","ui.router","ngAnimate","ngSanitize","firebase","ngMaterial","angular-storage","ngGeolocation","ngIdle","ngFileUpload","720kb.socialshare","pascalprecht.translate","chart.js","ng.deviceDetector"]).run(["$rootScope","$state",function(e,t){e.$on("$stateChangeError",function(e,a,s,o,n,i){"AUTH_REQUIRED"===i&&t.go("app.landing")})}]).config(["$mdDateLocaleProvider",function(e){e.formatDate=function(e){return moment(e).format("YYYY-MM-DD")}}]).run(["Idle",function(e){e.watch()}]).config(function(){var e={apiKey:"AIzaSyAK0VBRwTfNdncL6yO_TY38eeKPKNIV1iI",authDomain:"bloodsweatandtears-ca002.firebaseapp.com",databaseURL:"https://bloodsweatandtears-ca002.firebaseio.com",projectId:"bloodsweatandtears-ca002",storageBucket:"",messagingSenderId:"943747241942"};firebase.initializeApp(e)}).config(["$translateProvider",function(e){e.useStaticFilesLoader({prefix:"https://tktr-fa4cf.firebaseio.com/translations/",suffix:".json"}).preferredLanguage("en").useMissingTranslationHandlerLog().useSanitizeValueStrategy(null)}]).config(["$sceDelegateProvider",function(e){e.resourceUrlWhitelist(["self","https://tktr-fa4cf.firebaseio.com/**","https://google.com/maps/embed/**","**tktr-fa4cf.appspot.com","**glaring-fire-7161.appspot.com","https://*.tktr.eu/**","https://tktr-za.appspot.com/**","https://tktr-za.firebaseio.com","https://tktrza-test.firebaseio.com","https://api.tolq.com/v1/translations/requests/quote"])}]).run(["$rootScope","$state",function(e,t){e.stateIsLoading=!0,e.$on("$stateChangeStart",function(){e.stateIsLoading=!0})}]).config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,a){e.state("app",{url:"/app","abstract":!0,views:{header:{templateUrl:"templates/app2.html",controller:"AppCtrl"}}}).state("app.main",{url:"/home",views:{main:{templateUrl:"templates/main.html",controller:"MainCtrl"}}}).state("app.blog",{url:"/blog",views:{main:{templateUrl:"templates/blog.html",controller:"BlogCtrl"}}}).state("app.post",{url:"/post/:id",views:{main:{templateUrl:"templates/post.html",controller:"PostCtrl"}}}).state("app.createpost",{url:"/createpost",views:{main:{templateUrl:"templates/createpost.html",controller:"CreatePostCtrl"}}}),t.otherwise(function(e,t){return"/app/home"})}]).config(["$mdThemingProvider",function(e){e.theme("default")}]),angular.module("bst.controllers",["bst.services","bst.filters"]).controller("AppCtrl",["$scope","$log","$state","$stateParams","$rootScope","$http","$anchorScroll","$location","$mdMedia","$mdDialog","$timeout","$firebaseObject","$firebaseArray","$translate","$mdToast","$mdDialog","$sce","$interval","deviceDetector","$q","Auth",function(e,t,a,s,o,n,i,r,u,l,c,d,m,p,f,l,g,h,w,b,y){var v=firebase.database().ref();e.titleBg="https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/blood_1.gif",e.gifs={title:["https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/blood_1.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/blood_3.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/blood_4.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/sweat_1.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/sweat_2.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/tears_1.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/tears_2.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/tears_3.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/blood_5.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/blood_6_xs.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/sweat_3.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/sweat_4.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/sweat_5.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/sweat_6.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/tears_4.gif","https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/tears_5.gif"]},e.trustRes=function(e){return g.trustAsResourceUrl(e)},e.youtubeUrl=function(e){var t="https://www.youtube.com/embed/"+e+"?autoplay=0&rel=0";return g.trustAsResourceUrl(t)},e.signOut=function(){y.signOut().then(function(t){e.auth={},e.profile={}})},e.currentState=a.current.name,o.$on("$stateChangeSuccess",function(t,a,s,n,i){o.previousState=n.name,o.currentState=a.name,e.currentState=a.name,o.previousParams=i,o.currentParams=s,e.shareUrl="https://bloodsweatandtears.eu/#!"+r.url(),console.log("Previous state:"+o.previousState+" p "+i),console.log("Current state:"+o.currentState+" p "+s)}),h(function(){var t=Math.floor(Math.random()*e.gifs.title.length-1);e.titleBg=e.gifs.title[t]},3e3),e.mQ=function(e){return u(e)},firebase.auth().onAuthStateChanged(function(t){t&&(e.auth=t,e.$broadcast("authSet"),d(v.child("profiles").child(t.uid)).$loaded(function(t){e.profile=t}))}),e.signIn=function(t){y.loginWith(t,"pop").then(function(t){e.alert("Welcome","thanks for visiting!")})},e.refreshAuth=function(){var t=b.defer();return y.getAuth().then(function(a){a&&(e.auth=a,d(v.child("profiles").child(a.uid)).$loaded(function(s){e.profile=s,t.resolve(a)}))}),t.promise},e.scrollToX=function(e){var t=e;r.hash()!==t?r.hash(e):i()},e.alertBool=!1,e.alertText="",e.alertTitle="",e.alertGutter="2px",e.alert=function(t,a){e.alertBool=!0,e.alertText=a,e.alertTitle=t,c(function(){e.alertGutter="0px"},750),c(function(){e.alertGutter="2px"},4250),c(function(){e.alertBool=!1,e.alertText=!1,e.alertTitle=!1,e.alertGutter="2px"},5e3)};var A;for(e.tiles=[],A=0;A<200;A++)e.tiles.push(A)}]).controller("MainCtrl",["$scope","Enquiry",function(e,t){e.ten=[1,2,3,4,5],e.skills=[{score:40,name:"Javscript",colors:["#FFEBEE","#FFCDD2","#EF9A9A","#E57373","#EF5350","#F44336","#E53935","#D32F2F","#C62828","#B71C1C"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/javascript.png"},{score:45,name:"AngularJs",colors:["#FCE4EC","#F8BBD0","#F48FB1","#F06292","#EC407A","#E91E63","#D81B60","#C2185B","#AD1457","#880E4F"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/angularjs.svg"},{score:38,name:"Amazon Web Services",colors:["#F3E5F5","#E1BEE7","#CE93D8","#BA68C8","#AB47BC","#9C27B0","#8E24AA","#7B1FA2","#6A1B9A","#4A148C"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/aws.png"},{score:35,name:"Ionic",colors:["#E3F2FD","#BBDEFB","#90CAF9","#64B5F6","#42A5F5","#2196F3","#1E88E5","#1976D2","#1565C0","#0D47A1"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/ionic.png"},{score:40,name:"CSS",colors:["#EDE7F6",,"#D1C4E9","#B39DDB","#9575CD","#7E57C2","#673AB7","#5E35B1","#512DA8","#4527A0","#311B92"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/css3.png"},{score:43,name:"Ruby",colors:["#E0F7FA",,"#B2EBF2","#80DEEA","#4DD0E1","#26C6DA","#00BCD4","#00ACC1","#0097A7","#00838F","#006064"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/ruby.jpg"},{score:37,name:"Firebase",colors:["#FFF3E0","#FFE0B2","#FFCC80","#FFB74D","#FFA726","#FF9800","#FB8C00","#F57C00","#EF6C00","#E65100"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/firebase.png"},{score:30,name:"Google Cloud Compute",colors:["#FBE9E7",,"#FFCCBC","#FFAB91","#FF8A65","#FF7043","#FF5722","#F4511E","#E64A19","#D84315","#BF360C"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/googlecloud.png"},{score:45,name:"PayPal",colors:["#ECEFF1",,"#CFD8DC","#B0BEC5","#90A4AE","#78909C","#607D8B","#546E7A","#455A64","#37474F","#263238"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/paypal1.png"},{score:37,name:"PostgreSQL",colors:["#E8EAF6",,"#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593","#1A237E"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/postgres.png"},{score:42,name:"HTML5",colors:["#E8EAF6",,"#C5CAE9","#9FA8DA","#7986CB","#5C6BC0","#3F51B5","#3949AB","#303F9F","#283593","#1A237E"],img:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/html5.png"}],e.currView="store",e.setView=function(t){e.currView=t},e.startView=!0,e.startGame=function(){e.startView=!1,e.scrollToX("start")},e.verticals=["restaurant","bar","store","artist","startup"],e.content={restaurant:{implementations:[{title:"Digitise your menu",text:["Show of your menu is fullscreen with interactive menus.","Fullscreen photos and customiseable orders.","Place orders and call wait staff from their phone"],icon:"assignment",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/foodmenu.gif"},{title:"Go Cashless",text:["Accept payments from all card providers and never need a TPV.","Futureproof your till by accepting Apple Pay Android Wallet and even Bitcoin!"],icon:"card_giftcard",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/money.gif"},{title:"Analyze & Improve",text:["Using Beacon technology and app analytics we can help you gain insights into your business and your customers needs","Find ineffeciencies in your business and reclaim your lost profits!"],icon:"multiline_chart",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/analytics.gif"},{title:"Tax Bliss",text:["Easily print out statements and excel spreadsheets for your accountant at tax season or just integrate with a tax filing system!"],icon:"account_balance",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/taxes.gif"}]},bar:{implementations:[{title:"Digitise your menu",text:["Let your customers browse and order their drinks right from their phone.","They do the ordering and your bartender focuses on tending bar","Removing barriers to ordering drinks like 'Ugh the line is too long' and 'I've got no cash on me'"],icon:"assignment",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/foodmenu.gif"},{title:"Go Cashless",text:["Give your customers customised NFC 'debit cards' they can preload and top up online with their phone. ","Everything is tracked and balanced in the cloud, once again leaving your bartenders to tend bar."," Accept payments from all card providers and never need a TPV. Futureproof your till by accepting Apple Pay Android Wallet and even Bitcoin!"],icon:"attach_money",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/money.gif"},{title:"Analyze & Improve",text:["Using Beacon technologyand app analytics we can help you gain insights into your business and your customers needs","A-B test drink specials and special events with ease and confindence"],icon:"multiline_chart",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/analytics.gif"},{title:"Tax Bliss",text:["Know where you stand at all times with total coverage of all your income and cost in real time.","When tax season comes just hit a button and your accountant has all he needs."],icon:"account_balance",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/taxes.gif"},{title:"Payday made simple",text:["Shift lists and payable hours - a nightmare, no more.","Automate and make sure payments are made correctly and timeously"],icon:"attach_money"}]},store:{implementations:[{title:"Sell Online",text:["Get your products out into the world.","Custom built solutions to fit your needs and style.","From stock catalogs to invoicing and shipping - we got you."],icon:"add_shopping_cart"},{title:"Accept all the moneys",text:["Accept payments from all card providers and never need a TPV.","Futureproof your till by accepting Apple Pay Android Wallet and even Bitcoin!"],icon:"attach_money",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/money.gif"},{title:"Go Social",text:["Every store needs a social presence.","We will help set you up with a Facebook store, Instagram, Twitter, Facebook ads strategy and even automate it for you!"],icon:"share",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/social.gif"},{title:"Tax Bliss",text:["Easily print out statements and excel spreadsheets for your accountant at tax season or just integrate with a tax filing system!"],icon:"account_balance",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/taxes.gif"}]},artist:{implementations:[{title:"Sell Online",text:["Get your work out into the world."," Custom built solutions to fit your needs and style.","From stock catalogs to invoicing and shipping - we got you."],gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/sellonline.gif"},{title:"Host your content",text:["Make sure people get to enjoy your work - wherever they are, on whatever device.","Set up high quality, lightning fast streams of audio or video, present 360 video and VR content to phones worldwide"],gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/content.gif"},{title:"Accept all the moneys",text:["Accept payments from all card providers and never need a TPV.","Futureproof your till by accepting Apple Pay Android Wallet and even Bitcoin!"],icon:"attach_money",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/money.gif"},{title:"Go Social",text:["Every store needs a social presence.","We will help set you up with a Facebook store, Instagram, Twitter, Facebook ads strategy and even automate it for you!"],icon:"share",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/social.gif"},{title:"Tax Bliss",text:["Easily print out statements and excel spreadsheets for your accountant at tax season or just integrate with a tax filing system!"],icon:"account_balance",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/taxes.gif"}]},startup:{implementations:[{title:"Prototype Now",text:["You have the idea, now you need to show it to people","We can help get you from idea to prototype and beyond"],icon:"alarm"},{title:"Establish your Online Presence",text:["Get your domain, servers, email and SSL and webpage all sorted - make your .com a memorable one"],icon:"public"},{title:"Have it both ways",text:["Using the ever amazing Ionic framework we can build apps for both iOS and Android simulatenously and using the same code base. Saving time and money and getting your first release out faster!"],icon:"code"},{title:"Go Social",text:["Nobody needs social media quite like a startup with a product to promote","Build a base of content and we'll help you blast the web with it with automated posting schedules across all major (and evenminor) social networks","Using Google Adwords in conjunction with Facebook Ads we can make sure your product ends up in front of the right eyeballs "],icon:"share",gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/social.gif"}]}},e.services=[{title:"Responsive Web Design",text:["These days the web is available on shapes and sizes of screens.","Make sure your web page is ready for all of them with pages built from the ground up to adjust and adapt to the space available","From tiny iPhone5 5's to monstrous Samsung Phablets and 4K desktop monitors - be ready to dazzle on any screen size","using powerful web technologies your site will be running smoothly and snappily even on legacy devices"],gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/responsive.gif"},{title:"App Prototyping",text:["Turn that idea for a revolutionary app into reality","Combining the power of Cordova, Ionic and AngularJs we can go from the drawing board to live testing in a matter of weeks.","Anything is possible - from a photo sharing app, secure private messaging app or payment processing apps"],gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/prototyping.gif"},{title:"Online Store",text:["Sell your goods the world over with a custom built store that is designed to meet your needs and brand style.","Accept payments, issue invoices & refunds, print shipping labels and automated emailing systems - the whole nine yards"],gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/store2.gif"},{title:"Content Hosting",text:["Need to get your art/music/video out there?","We can set up secure, reliable and fast media streams for any kind of content - audio, video, 360 video","Using AWS's powerful architecture we can build you an easy to use media distribution platform that opens you up to the world - in HD of course"],gif:"https://s3-eu-west-1.amazonaws.com/bloodsweatandtears.eu/assets/images/content2.gif"}],e.enq={name:"",company:"",email:"",text:""},e.submitEnq=function(){t.submit(e.enq).then(function(t){e.alert("Thanks!","We'll be in touch soon!")})}}]).controller("BlogCtrl",["$scope","Blogs",function(e,t){t.getPosts().then(function(t){e.posts=t,twttr.widgets.load()}),e.hoverObj={}}]).controller("PostCtrl",["$scope","Blogs","$stateParams",function(e,t,a){var s=firebase.database().ref();t.getPost(a.id).then(function(t){e.post=t}),e.likesCount=function(e){return e?Object.keys(e).length:0},e.toggleLike=function(){e.auth&&(e.post.likes&&e.post.likes[e.auth.uid]?(e.post.likes[e.auth.uid]=null,s.child("posts").child(a.id).child("likes").child(e.auth.uid).set({})):(e.post.likes||(e.post.likes={}),e.post.likes[e.auth.uid]=!0,s.child("posts").child(a.id).child("likes").child(e.auth.uid).set(!0)))},e.toggleCommentLike=function(t){e.auth&&(t.likes&&t.likes[e.auth.uid]?(t.likes[e.auth.uid]=null,s.child("comments").child(t.$id).child("likes").child(e.auth.uid).set({})):(t.likes||(t.likes={}),t.likes[e.auth.uid]=!0,s.child("comments").child(t.$id).child("likes").child(e.auth.uid).set(!0)))},t.getComments(a.id).then(function(t){e.comments=t}),e.auth?e.newComment={comment:"",uid:e.auth.uid,displayName:e.auth.displayName,postId:a.id,photo:e.auth.photoURL}:e.$on("authSet",function(){e.newComment={comment:"",uid:e.auth.uid,displayName:e.auth.displayName,postId:a.id,photo:e.auth.photoURL}}),e.addComment=function(){t.addComment(e.newComment).then(function(t){e.newComment={comment:"",uid:e.auth.uid,displayName:e.auth.displayName,postId:a.id,photo:e.auth.photoURL}})}}]).controller("CreatePostCtrl",["$scope","Blogs","$stateParams",function(e,t,a){e.newPost={title:"",banner:"",body:[],images:{},tags:[]},e.newData={paragraph:"",quote:"",image:"",youtube:""},e.addParagraph=function(){var t={text:e.newData.paragraph,type:"text"};e.newPost.body.push(t)},e.addPost=function(){t.addPost(e.newPost).then(function(e){console.log("done"),console.log(e)})},e.addImage=function(){var t={image:e.newData.image,type:"image"};e.newPost.body.push(t)},e.addQuote=function(){var t={text:e.newData.quote,type:"quote"};e.newPost.body.push(t)},e.addYoutube=function(){var t={url:e.newData.youtube,type:"youtube"};e.newPost.body.push(t)}}]),angular.module("bst.directives",[]).directive("tagEnter",function(){return function(e,t,a){t.bind("keydown keypress",function(t){var s=t.which||t.keyCode;13===s&&(e.$apply(function(){e.$eval(a.dlEnterKey)}),t.preventDefault())})}}).directive("threeKeys",function(){return function(e,t,a){var s=0;t.bind("keydown keypress",function(t){s++,s>=3&&(e.$apply(function(){e.$eval(a.myOnKeyDownCall)}),t.preventDefault())})}}).directive("myAutocomplete",function(){return{require:"ngModel",replace:!0,scope:{ngModel:"=",address1:"=",city:"=",state:"=",country:"=",zip:"="},template:'<input class="form-control" type="text" data-tap-disabled>',link:function(e,t,a,s){var o={},n=new google.maps.places.Autocomplete(t[0],o);google.maps.event.addListener(n,"place_changed",function(){e.$apply(function(){var a=n.getPlace(),o=a.address_components;e.address1=o[0].short_name+" "+o[1].short_name,e.city=o[3].short_name,e.state=o[5].short_name,e.country=o[6].long_name,e.zip=o[7].short_name,s.$setViewValue(t.val())})})}}}).directive("backImg",function(){return function(e,t,a){var s=a.backImg;t.css({"background-image":"url("+s+")","background-size":"cover"})}}).directive("disabletap",["$timeout",function(e){return{link:function(){e(function(){container=document.getElementsByClassName("pac-container"),angular.element(container).attr("data-tap-disabled","true"),angular.element(container).on("click",function(){document.getElementById("type-selector").blur()})},500)}}}]).directive("onLongPress",["$timeout",function(e){return{restrict:"A",link:function(t,a,s){a.bind("touchstart",function(a){t.longPress=!0,e(function(){t.longPress&&t.$apply(function(){t.$eval(s.onLongPress)})},600)}),a.bind("touchend",function(e){t.longPress=!1,s.onTouchEnd&&t.$apply(function(){t.$eval(s.onTouchEnd)})})}}}]).directive("myDirective",function(){return{restrict:"EA",scope:{title:"@"},templateUrl:"mytemplate.html",controller:controllerFunction,link:function(e,t,a){}}}).directive("ngDrag",["$document",function(e){return{link:function(t,a,s){function o(e){l=e.pageY-r,u=e.pageX-i,a.css({top:l+"px",left:u+"px"})}function n(){e.off("mousemove",o),e.off("mouseup",n)}var i=0,r=0,u=0,l=0;a.on("mousedown",function(t){t.preventDefault(),i=t.pageX-u,r=t.pageY-l,e.on("mousemove",o),e.on("mouseup",n)})}}}]),angular.module("bst.filters",[]).filter("unique",function(){return function(e,t){if(t===!1)return e;if((t||angular.isUndefined(t))&&angular.isArray(e)){var a=[],s=function(e){return angular.isObject(e)&&angular.isString(t)?e[t]:e};angular.forEach(e,function(e){for(var t=!1,o=0;o<a.length;o++)if(angular.equals(s(a[o]),s(e))){t=!0;break}t||a.push(e)}),e=a}return e}}).filter("capitalise",function(){return function(e){return e?e.charAt(0).toUpperCase()+e.substr(1).toLowerCase():""}}).filter("fullstop",function(){return function(e){if(e){var t=e.charAt(e.length-1);return"."==t||"!"==t||"?"==t?e:e+="."}return""}}).filter("converter",function(){return function(e,t){return console.log("converter",e,t.rate),e*t.rate}}).filter("searchFilter",["User",function(e){var t,a,s="en";return e.getUser().then(function(e){t=e.profile,a=e.auth,s=e.profile.l18n}),function(e,t){var a={};if(t){var o=angular.lowercase(t);angular.forEach(e,function(e,t){e.searchKeys&&(e.searchKeys[s]&&e.searchKeys[s].name.indexOf(o)>=0&&(a[e.$id]=e),"en"!=s&&e.searchKeys.en&&e.searchKeys.en.name.indexOf(o)>=0&&(a[e.$id]=e),e.searchKeys[s].subcat&&e.searchKeys[s].subcat.indexOf(o)>=0&&(a[e.$id]=e),e.searchKeys[s].keywords&&e.searchKeys[s].keywords.indexOf(o)>=0&&(a[e.$id]=e))})}return a}}]).filter("searchFilter2",["User","InfoService",function(e,t){var a,s,o="en";return e.getUser().then(function(e){a=e.profile,s=e.auth,o=e.profile.l18n}),function(e,t){var a={};if(t){var s=angular.lowercase(t);angular.forEach(e,function(e){if(e){var t=angular.lowercase(e[o].name);if(e[o].keywords)var n=angular.lowercase(e[o].keywords);e[o]&&t.indexOf(s)>=0&&(a[e.$id]=e),"en"!=o&&e.en&&t.indexOf(s)>=0&&(a[e.$id]=e),e[o].subcat&&e[o].subcat.indexOf(s)>=0&&(a[e.$id]=e),e[o].keywords&&n.indexOf(s)>=0&&(a[e.$id]=e)}})}return a}}]).filter("unsafe",function(e){return function(t){return e.trustAsHtml(t)}}).filter("orderObjectBy",function(){return function(e,t){if(!angular.isObject(e))return e;var a=[];for(var s in e)a.push(e[s]);return a.sort(function(e,a){return e=parseInt(e[t]),a=parseInt(a[t]),e-a}),a}}),jQuery.expr.filters.offscreen=function(e){var t=e.getBoundingClientRect();return t.x+t.width<0||t.y+t.height<0||t.x>window.innerWidth||t.y>window.innerHeight},function(e){var t=e(window);e.fn.visible=function(a,s,o,n){if(!(this.length<1)){o=o||"both";var i=this.length>1?this.eq(0):this,r="undefined"!=typeof n&&null!==n,u=r?e(n):t,l=r?u.position():0,c=i.get(0),d=u.outerWidth(),m=u.outerHeight(),p=s!==!0||c.offsetWidth*c.offsetHeight;if("function"==typeof c.getBoundingClientRect){var f=c.getBoundingClientRect(),g=r?f.top-l.top>=0&&f.top<m+l.top:f.top>=0&&f.top<m,h=r?f.bottom-l.top>0&&f.bottom<=m+l.top:f.bottom>0&&f.bottom<=m,w=r?f.left-l.left>=0&&f.left<d+l.left:f.left>=0&&f.left<d,b=r?f.right-l.left>0&&f.right<d+l.left:f.right>0&&f.right<=d,y=a?g||h:g&&h,v=a?w||b:w&&b,y=f.top<0&&f.bottom>m||y,v=f.left<0&&f.right>d||v;if("both"===o)return p&&y&&v;if("vertical"===o)return p&&y;if("horizontal"===o)return p&&v}else{var A=r?0:l,C=A+m,F=u.scrollLeft(),$=F+d,k=i.position(),E=k.top,B=E+i.height(),x=k.left,z=x+i.width(),P=a===!0?B:E,D=a===!0?E:B,S=a===!0?z:x,_=a===!0?x:z;if("both"===o)return!!p&&D<=C&&P>=A&&_<=$&&S>=F;if("vertical"===o)return!!p&&D<=C&&P>=A;if("horizontal"===o)return!!p&&_<=$&&S>=F}}}}(jQuery);var baseURL="https://d4e7e241.ngrok.io";angular.module("bst.services",[]).factory("Enquiry",["$http","$q",function(e,t){function a(a){var s=t.defer(),o={method:"POST",headers:{"Content-Type":"application/json"},url:baseURL+"/users/bst_enquiry",data:{obj:a}};return e(o).then(function(e){console.log(e.data),e.data?s.resolve(e.data):s.resolve(null)}),s.promise}return{submit:function(e){return a(e)}}}]).factory("Auth",["$http","$firebaseAuth","$firebaseObject","$q",function(e,t,a,s){function o(){var e=s.defer();return u.$signOut().then(function(t){e.resolve(t)}),e.promise}function n(e,t){var a=s.defer();switch(e){case"google":var o=new firebase.auth.GoogleAuthProvider;o.addScope("https://www.googleapis.com/auth/plus.login"),o.addScope("https://www.googleapis.com/auth/userinfo.email");break;case"facebook":var o=new firebase.auth.FacebookAuthProvider;o.addScope("email"),o.addScope("user_friends");break;case"twitter":var o=new firebase.auth.TwitterAuthProvidernewDriver}switch(t){case"pop":u.$signInWithPopup(o).then(function(e){if(e.user&&e.user.email){var t={uid:e.user.uid,displayName:e.user.displayName,email:e.user.email};e.user.photoURL&&(t.photo=e.user.photoURL),r.child("profiles").child(e.user.uid).set(t).then(function(e){a.resolve(t)})}},function(e){a.resolve(e)});break;case"redir":firebase.auth().signInWithRedirect(o)}return a.promise}function i(){var e=s.defer(),a=t().$getAuth();return e.resolve(a),e.promise}var r=firebase.database().ref(),u=t();return{loginWith:function(e,t){return n(e,t)},getAuth:function(){return i()},signOut:function(){return o()}}}]).factory("Blogs",["$http","$firebaseArray","$firebaseObject","$q",function(e,t,a,s){function o(){var e=s.defer();return t(l.child("posts")).$loaded(function(t){e.resolve(t)}),e.promise}function n(e){var t=s.defer();return a(l.child("posts").child(e)).$loaded(function(e){t.resolve(e)}),t.promise}function i(e){var a=s.defer();return t(l.child("comments").orderByChild("postId").equalTo(e)).$loaded(function(e){a.resolve(e)}),a.promise}function r(e){var a=s.defer();return e.timestamp=moment().format("x"),t(l.child("posts")).$add(e).then(function(e){a.resolve(e)})["catch"](function(e){}),a.promise}function u(e){var a=s.defer();return e.timestamp=moment().format("x"),t(l.child("comments")).$add(e).then(function(e){a.resolve(e)}),a.promise}var l=firebase.database().ref();return{getPosts:function(){return o()},getPost:function(e){return n(e)},getComments:function(e){return i(e)},addPost:function(e){return r(e)},addComment:function(e){return u(e)}}}]);